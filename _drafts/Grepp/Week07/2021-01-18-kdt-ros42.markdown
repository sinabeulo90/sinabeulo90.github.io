---
layout: post
title:  "OpenCV 소개, HSV, 용어 정리"
date:   2021-01-18 01:00:00 +0900
categories: "Grepp/KDT"
tags: OpenCV
---

# 강의 자료: OpenCV 특강, 한동대학교 전산전자공학부 이강 교수


## OpenCV 소개

- 컴퓨터 비전(Computer Vision: CV)을 위해 만들어진 공개 소프트웨어(라이브러리 파일)
- 자율주행 자동차에서 카메라 영상을 가공하고 분석하여 상황 인식에 사용
- 컴퓨터 비전 분야에서 널리 이용되고 있으며, 영상 데이터의 표현, 변환, 분석 등에 필요한 도구들을 제공
- 머신러닝에도 사용
- C, C++, Java, Phton 지원(내부적으로 C/C++로 실행되어 수행속도가 빠름)
    - 프로그래밍 인터페이스로 주로 C++와 Python을 이용
- Windows, Linux, MacOS, iOS, Android 등에서 이용 가능한 크로스 플랫폼 프레임워크
- 다양한 CPU(x86, x64, ARM, MIPS), GPU(nVidia, OpenCL) 하드웨어 지원
- 머신러닝 프레임워크 지원
- 오픈소스 BSD 라이센스: 무료 소프트웨어, 단 OpenCV를 사용했다는 것을 명시
- 많은 응용 분야에서 사용
    - 수많은 기업들(Google, Yahoo, Microsoft, Intel, IBM, Sony, Honda, Toyota)과 스타트업에서 사용
    - PC 응용프로그램, 모바일 앱, 임베디드 SW 등
    - 가전기기, 자동차, 로봇 등
- 버전별 특징
    - 버전 1.x: C 언어로 작성
    - 버전 2.x: C++ 언어로 재작성
    - 버전 3.x
        - 모듈별 라이브러리가 분리되어 있었으나, 이번 버전에서 통합
        - OpenCL 지원을 토해 실행 속도 개선
        - 특징점 추출 알고리즘과 관련 기능이 보강되고 추가
    - 버전 4.x: 딥러닝 패키지 추가되어 Yolo 등 딥러닝 기능 사용이 용이해짐



## OpenCV의 이미지 표현 방식

- 파이썬에서는 1픽셀 표현을 위해 3채널(B, G, R) 3바이트를 사용
- 컬러는 (B, G, R) 순서로 배열을 이루는 3채널 구조
    - 각 픽셀의 데이터 타입: `numpy.ndarray`
= 640 x 480 이미지의 경우: 점 하나를 표현하는데 [Blue, Green, Red] 형태의 배열이 한 행에 640개씩 들어 있고, 이와 같은 행이 총 480개가 있다.



## HSV 색상 표현

- RGB 색상 표현 방식대신 색상(Hue), 채도(Saturation), 명도(Value)를 기준으로 색상 표현
    - 색상(Hue): 색의 질, 노란색, 빨간색, 파란색, ...
    - 채도(Saturation):  선명도, 원색에 가까울 수록 채도가 높음
    - 명도(Value): 밝기, 명도가 높을 수록 백색, 낮을 수록 흑색에 가까워짐
- 사람의 눈을 HSV로 표현하기 용이
- 객체를 분할시키기 용이하기 때문에 이미지 처리에 많이 이용되는 표현 방법
- 거꾸로 선 원뿔 모양의 색 공간
- ex. 차선을 구분하기 위해 차선과 바닥면의 명도(Value) 차이를 이용해 분리(바닥면은 검은색에 가깝고, 차선은 흰색에 가까움)

![HSV](/assets/grepp/hsv.png)



## OpenCV의 좌표계

- 맨 왼쪽 위: (0, 0)
- (x, y)로 표현되는 점(픽셀)은 오른쪽으로 x만큼 증가, 아래쪽으로 y만큼 증가
- 파이썬에서 순서쌍(tuple)을 이용하여 좌표 값 표시



## 동영상 파일을 읽어서 표시하기

- 동영상: 정지 이미지가 시간에 따라 바뀌며 나타나는 것
    - 다수의 프레임을 연속적으로 표시하는 원리
    - 카메라에서 영상을 표시하는 작업과 동영상 파일을 재생하는 것은 동일한 작업
    - 빠르게 이미지를 보여주면 사람 눈에서는 움직이는 그림으로 인식
- 프레임(frame): 동영상 내에서 한 장의 그림의 의미
    - fps(frames per second): 얼마나 빠르게 다음 그림을 보여주는가
    - 자율주행 알고리즘에서는 프레임 단위의 이미지를 분석하여 주행 제어 결정
