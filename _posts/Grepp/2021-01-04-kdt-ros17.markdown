---
layout: post
title:  "자율주행 단계별 요소 기술"
date:   2021-01-04 02:00:00 +0900
categories: "Grepp/KDT"
---

## 자율주행 3단계 프로세스

![자율주행 프로세스](/assets/grepp/selfdriving_process1.jpg)



## 사람의 운전 방식...

네비게이션의 도움을 받아서 사람이 직접 운전

- 네이게이션의 도움
    - 지도 제공
    - 목적지가지 경로 찾기
    - 좌/우회전 경로 변경 안내 제공

- 사람이 직접 주행
    - 차선과 지형지물 고려
    - 주변 차량을 고려
    - 교통 신호등을 인식
    - 돌발 상황에 대응



## 자율주행 SW가 운전하는 방식
- 보다 정확한 지도 필요
- 지도에서 자신의 현재 위치 알아내기: ex. GPS, 영상 매칭, 라이다 매칭
- 목적지까지 경로 찾기
- 주변 살피기: ex. 각종 센서
- 상홍에 맞게 속도 조정, 핸들 꺽기
    - 차선을 준수하여 경로 그대로 따라가기
    - 교통신호 따르기
    - 예외 상황에 대처: ex. 추월하기, 정차하기
    - 돌발 상황에 대처: ex. 급브레이크, 장애물 피해가기


    
## 고정밀 지도

HD Map(High Definition Map)
- 기존 네이게이션, T map 지도보다 정밀한 지도: 10 ~ 20cm 정밀도 제공
- 다양한 부가 정보 포함: ex. 차선 저오, 가드레일, 도로 곡률와 경사, 신호등 위치, 교통 표식
- 벡터맵, Point Clouds(Point Map, 3차원 지도), 벡터맵 + Point Map



## 고정밀지도의 제작

MMS(Mobile Mapping System)
- 데이터 수집한 다음, 후처리 작업을 통해 지도 제작
- 라이다 스캐너, 다수 카메라, Sky View 카메라, GNS/INS, Light Sensor 등 사용

1. 현장조사: MMS(LiDAR) 이용, Point Data 수집
2. Data 처리: 데이터 후처리, LAS 데이터 변환
3. MAP 구축: 곡률, 경사도 정보 추출, 객체 추출
4. Data 검수: 데이터 오류 검수 및 검증
5. APP Map: ADAS/HD Map 변환 생성



## Localization 기술

정밀 지도를 연동하고 라이다, 카메라를 이용하여 차량의 현재 위치 파악 ex. 지도의 표지판과 라이다/카메라로 인식한 표지판 비교



## Global Path Planning (Route Planning)

목적지까지의 경로 찾기
- 중간 목적지 또는 최종 목적지까지의 경로
- 교차로에서의 행위를 결정
- 교통 상황을 반영: 많은 네이게이션에서 지원하는 기능



## Object Detection

주변 차량, 보행자, 오토바이, 자전거 등을 인식. 신호등의 경우 지형지물에 속하기 때문에, 지도에 포함되어 있는 경우가 많다.



## Object Tracking

각 오브젝트에 고유 ID를 부여하고 추적하여, 예상되는 주행경로를 예측



## Local Path Planning (Trajectory Planning)

충돌 회피를 고려하여 다음 이동할 곳으로의 경로 찾기

- 여러 개의 후보 경로를 확보해야 함
- 끊임 없이 후보 경로를 삭제 및 신규 경로 등록 작업을 반복
- 실시간성이 중요하므로, 시스템 최적화 필요



## Behavior Selector

운전 방법, 성향, 행위 등을 결정



## Local Path Following (Trajectory Following)

핸들에 따라 바퀴의 회전, 차량의 무게를 고려하여 정해져 있는 경로따라 차량을 운전하는 방법을 찾아내는 기술

ex. Pure pursuit 알고리즘

1. 차량의 현재 위치를 결정한다.
2. 차량에서 가장 가까운 경로 상의 점을 찾는다.
3. 목표점을 찾는다.
4. 곡률을 계산하고 해당 곡률로 차량의 방향을 업데이트 해준다.
4. 차량의 위치를 업데이트 한다.



## Vehicle Control

주행 제어: 원하는 대로 차량을 움직이게 만들기

차량 운동학, 관성, 마찰력, 미끄러짐 등을 고려해야 하므로, 단순하지 않음



## 자율주행 프로세스

![자율주행 프로세스](/assets/grepp/selfdriving_process2.png)
