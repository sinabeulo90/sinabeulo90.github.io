---
layout: post
title:  "ì›ê²© í†µì‹  í™˜ê²½ êµ¬ì¶•"
date:   2020-12-24 02:00:00 +0900
categories:
    - "Grepp/KDT"
tags:
    - ROS
---

ì›ê²©ì§€ì˜ 2ëŒ€ PCë¥¼ í†µì‹ í•˜ë ¤ë‹¤ ë³´ë©´, Firewall, ë¼ìš°í„°, ê³µìœ ê¸° ì„¤ì • ë¬¸ì œ ë•Œë¬¸ì— ì•ˆë˜ëŠ” ê²½ìš°ê°€ ìžˆë‹¤.


## ì›ê²© í†µì‹  í™˜ê²½ êµ¬ì¶•
ì§‘
- Student ì‚¬ì„¤ IP: 192.168.1.33, ê°™ì€ ê³µìœ ê¸°ì—ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìžˆëŠ” ìž„ì˜ë¡œ í• ë‹¹ëœ IP ì£¼ì†Œ ê°’, ì™¸ë¶€ì—ì„œ ì‚¬ìš©í•  ê²½ìš° ì˜ë¯¸ X, ì„œë¡œ ë‹¤ë¥¸ ê³µìœ ê¸°ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì‚¬ì„¤ IPë¼ë¦¬ ì£¼ì†Œê°€ ê°™ë”ë¼ë„ ìƒê´€ X
- ê³µìœ ê¸° A ê³µì¸ IP: 12.34.56.78, ì „ì„¸ê³„ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìžˆë„ë¡ ê³µì¸ëœ ìœ ì¼í•œ IP ì£¼ì†Œ ê°’

ì‹¤ìŠµì‹¤
- ê³µìœ ê¸° B ê³µì¸ IP: 99.88.77.66
- Teacher (Xycar) ì‚¬ì„¤ IP: 192.168.5.22

ì‚¬ì„¤ IPë¥¼ ê°€ì§€ê³  ìžˆëŠ” ì—¬ëŸ¬ ìž¥ì¹˜ë¥¼ "í¬íŠ¸ í¬ì›Œë”©"ì„ ì´ìš©í•˜ì—¬ ì—°ê²°


## ì§‘ ë„¤íŠ¸ì›Œí¬ í™˜ê²½

ê³µìœ ê¸° A
- Studentì— DMZ ì„¤ì •
    - ê³µì¸ IP: 12.34.56.78

Student
- OS: Ubuntu 16.04.06
- ROS version: Kinetic
- ì‚¬ì„¤ IP: 192.168.1.33
- Hostname: DESKTOP-G5ESDEC



## ì‹¤ìŠµì‹¤ ë„¤íŠ¸ì›Œí¬ í™˜ê²½

ê³µìœ ê¸° B
- Teacherì— ëŒ€í•´ì„œ 1024~65000 ë²”ìœ„ í¬íŠ¸ í¬ì›Œë”©
- ê³µì¸ IP: 99.88.77.66

Teacher (Xycar)
- OS: Ubuntu 16.04
- ROS Version: Kinetic
- ì‚¬ì„¤ IP: 192.168.5.22
- Hostname: tegra-ubuntu



## í¬íŠ¸ í¬ì›Œë”© ê³¼ì •

1. ê³µìœ ê¸° í¬íŠ¸ í¬ì›Œë”© ì„¤ì •
2. /etc/hosts íŒŒì¼ ìˆ˜ì •
3. ROS í™˜ê²½ë³€ìˆ˜ ì„¤ì •
4. ì‹¤í–‰ í…ŒìŠ¤íŠ¸


## ê³µìœ ê¸° í¬íŠ¸ í¬ì›Œë”© ì„¤ì •

- ê³µìœ ê¸° ì œì¡°ì‚¬ë§ˆë‹¤ ì„¤ì • ë°©ë²•ì´ ë‹¤ë¥´ë¯€ë¡œ ê³µìœ ê¸° ë©”ë‰´ì–¼ì„ ë³´ê³  ì„¤ì •í•  ê²ƒ
- í¬íŠ¸ í¬ì›Œë”© ì„¤ì •í•  ë•Œ, í¬íŠ¸ ë²”ìœ„ë¥¼ 1024~65000ë¡œ í•  ê²ƒ
- ë˜ëŠ” DMZ ì„¤ì •í•  ë•Œ ROS ì›ê²© í†µì‹ ì„ ì‹œë„í•  ìž¥ì¹˜ì˜ IPë¥¼ ìž…ë ¥í•  ê²ƒ
    - DMZ: ê³µìœ ê¸°ì˜ ëª¨ë“  í¬íŠ¸ë¥¼ íŠ¹ì • ì‚¬ì„¤ IPì— í¬íŠ¸ í¬ì›Œë”© í•˜ëŠ” ê²ƒ


## ì§‘ PC ë„¤íŠ¸ì›Œí¬ ì„¤ì •

/etc/hosts íŒŒì¼ ìˆ˜ì •
- Teacherì˜ ê³µì¸IP, Teacherì˜ Hostname ì¶”ê°€

{% highlight bash %}
# remote network: Portable ISP router
...
106.244.165.6   tegra-ubuntu    # XYCAR B2ì˜ ê³µìš© IP
...
{% endhighlight %}


## ì‹¤ìŠµìž¥ PC ë„¤íŠ¸ì›Œí¬ ì„¤ì •

/etc/hosts íŒŒì¼ ìˆ˜ì •
- Studentì˜ ê³µì¸ IP, Studentì˜ Hostname ì¶”ê°€

{% highlight bash %}
# remote network: Portable ISP router
...
175.197.119.36 DESKTOP-G52SDEX  # OPERATORì˜ ê³µìš© IP
...
{% endhighlight %}




## ROS í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

ROS ë§ˆìŠ¤í„°(roscore)ëŠ” ROS ë„¤íŠ¸ì›Œí¬ì—ì„œ ë°˜ë“œì‹œ í•˜ë‚˜ë§Œ ì‹¤í–‰ë˜ì–´ì•¼ í•¨

Student --- ROS Masterì— ì ‘ì† ---> Teacher (ROS Master)

Studentì˜ ê´€ì ì—ì„œ ROS Masterì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ì„œëŠ” roscoreê°€ ì‹¤í–‰ë˜ê³  ìžˆëŠ” Teacherì˜ ê³µìœ ê¸° ê³µì¸ IPê°€ í•„ìš”

Studentì˜ ~/.bashrc íŒŒì¼ì—ì„œ ROST_HOST_NAME ì£¼ì„ ë° ROS_MASTER_URI ìˆ˜ì •

{% highlight bash %}
#export ROS_HOSTNAME=localhost
export ROS_MASTER_URI=http://106.244.165.6:11311    # Teacherì˜ IP(roscore)
{% endhighlight %}

Teacherì˜ ~/.bashrc íŒŒì¼ì—ì„œ ROST_HOST_NAME ì£¼ì„
{% highlight bash %}
#export ROS_HOSTNAME=192.168.5.69
export ROS_MASTER_URI=http://192.168.5.69:11311 # ìžê¸° ìžì‹ ì´ Master ì´ë¯€ë¡œ
{% endhighlight %}

---> ROS_HOSTNAME í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€ ëª…ë ¹ì–´ë¥¼ ì£¼ì„ ì²˜ë¦¬í•œë‹¤.
(/etc/hosts íŒŒì¼ì„ ìˆ˜ì •í•˜ë©´ì„œ ì´ë¯¸ Hostnameì— ëŒ€í•œ ì„¤ì •ì´ ë§ˆì³¤ê¸° ë•Œë¬¸)



## ì‹¤í–‰ í…ŒìŠ¤íŠ¸
Studentì˜ PCì—ì„œ Publishë¥¼ í•´ë´…ë‹ˆë‹¤. Student ìª½ì˜ í‚¤ë³´ë“œ ìž…ë ¥ì´ Teacher í™”ë©´ì— í‘œì‹œë˜ë©´ OK (ë°˜ëŒ€ ë°©í–¥ë„ ê°€ëŠ¥)

Student (Pub)
{% highlight bash %}
# í† í”½: /chatter
# ì „ì†¡ ë°ì´í„°: hello
$ rostopic pub /chatter std_msgs/String hello
{% endhighlight %}

Teacher (Sub)
{% highlight bash %}
# í† í”½: /chatter
# /chatter í† í”½ìœ¼ë¡œ ë°›ì€ ë°ì´í„°ë¥¼ ì¶œë ¥
$ rostopic echo /chatter
{% endhighlight %}



## ì •ë¦¬í•˜ë©´

ì§‘
- Student ì‚¬ì„¤ IP: 192.168.1.33, ê°™ì€ ê³µìœ ê¸°ì—ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìžˆëŠ” ìž„ì˜ë¡œ í• ë‹¹ëœ IP ì£¼ì†Œ ê°’, ì™¸ë¶€ì—ì„œ ì‚¬ìš©í•  ê²½ìš° ì˜ë¯¸ X, ì„œë¡œ ë‹¤ë¥¸ ê³µìœ ê¸°ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì‚¬ì„¤ IPë¼ë¦¬ ì£¼ì†Œê°€ ê°™ë”ë¼ë„ ìƒê´€ X
- ê³µìœ ê¸° A ê³µì¸ IP: 12.34.56.78, ì „ì„¸ê³„ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìžˆë„ë¡ ê³µì¸ëœ ìœ ì¼í•œ IP ì£¼ì†Œ ê°’

ì‹¤ìŠµì‹¤
- ê³µìœ ê¸° B ê³µì¸ IP: 99.88.77.66
- Teacher (Xycar) ì‚¬ì„¤ IP: 192.168.5.22

ê³µìœ ê¸° í¬íŠ¸í¬ì›Œë“œ ì„¤ì • ---> ì»´í“¨í„° /etc/hosts ìˆ˜ì • ---> ì»´í“¨í„° .bashrc(ROS í™˜ê²½ë³€ìˆ˜) ìˆ˜ì •
