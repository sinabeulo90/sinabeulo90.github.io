---
layout: post
title:  "초음파 센서 장치"
date:   2021-01-11 04:00:00 +0900
categories: "Grepp/KDT"
plugins: mathjax
---

## 초음파(Ultrasonic Wave)

- 인간의 귀로 들을 수 있는 가청 주파수 대역보다 높은 진동수로 발생하는 파동
- 가청 주파수는 사람마다 다르지만, 약 20Hz - 20kHz
- 초음파 센서는 초음파를 이용하여 센서로부터 사물까지의 직선 거리를 측정



## Xycar에서 사용하는 초음파 센서

- 모두 8개로 전방 3개, 후방 3개, 좌측 1개, 우측 1개를 사용
- 아두이노 1개에 초음파 센서를 4개씩 연결하여 프로세서 보드와 USB 통신



## 초음파 센서

- HC-SR04

| Working Voltage | DC 5V |
| Working Current | 15mA |
| Working Frequency | 40kHz |
| Min/Max Range | 2cm - 4m |
| Measuring Angle | 15 degree |
| Dimension | 45 x 20 x 15 mm |



## 초음파 센서의 동작

시그널

| Vcc | 센서 부품에 전력 공급(DC 5V) |
| GND | 회로의 그라운드에 연결 |
| Trig | 센서를 동작시키기 위한 트리거 시그널(입력) |
| Echo | 거리 측정 결과를 전달하기 위한 시그널(출력) |

1. 송신부에서 초음파를 발사한다.
2. 초음파가 물체에서 반사된다.
3. 반사된 초음파가 수신부에서 감지된다.
4. 송신과 수신 사이의 시간 간격을 기준으로 물체까지의 거리를 계산한다.

![HC-SR04](/assets/grepp/HC-SR04.jpg)



## 초음파 센서의 동작 시나리오

시작 ---> 초음파 발사와 수신 ---> 시간차 출력

1. Start 명령: 아두이노가 TRIG 핀에 10us동안 High 신호를 내보낸다.
2. 초음파 센서가 40kHz 초음파 펄스(pulse)를 여덟 개 만들어 물체로 보낸다.
3. 물체에 반사된 초음파 펄스가 되돌아가서 초음파 센서에 수신된다.
4. 센서는 송신과 수신의 시간차에 비례하는 길이의 펄스를 Echo 핀으로 출력한다.



## 초음파 센서를 이용한 거리 측정

- 소리의 속도
    - 초속 340m/s
    - 1cm 이동하는데 약 29us 소요
- 송신과 수신의 시간차: 초음파의 왕복 이동시간
- 물체까지의 거리: $[\frac{\text{송신과 수신의 시간차}\,us \ \div \ 2}{29us}] cm$



## 초음파 센서의 측정 오류

- 초음파 펄스가 모두 흡수되거나, 다른 곳으로 튕겨나가 신호가 돌아오지 않는 경우 오차가 발생한다.
- 예시:
    - 너무 멀리 있는 경우
    - 비스듬히 신호를 보낼 경우
    - 물체가 너무 작은 경우
    - 물체가 너무 부드러워서 초음파가 흡수될 경우
